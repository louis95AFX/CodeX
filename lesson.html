<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Learn HTML</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css" />
  </head>
<style>
  .fade {
  opacity: 0;
  transition: opacity 0.5s ease-in-out;
}

.fade.show {
  opacity: 1;
}
dialog {
  background-color: white;
  border-radius: 8px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  padding: 20px;
  width: 100%;
  max-width: 400px;
}

dialog[open] {
  animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

</style>
<body class="bg-gray-100">
 <!-- Header -->
<header class="bg-white p-4 shadow fixed top-0 w-full z-10">
  <div class="container mx-auto flex justify-between items-center">
    <img src="codexbg.png" alt="Logo" class="h-12">
    <!-- Logout Icon -->
    <a href="webdev.html" class="text-gray-600 hover:text-red-600 text-xl flex items-center gap-2">
      <i class="fa-solid fa-right-from-bracket"></i>
      <span class="text-sm">Exit Lesson</span>
    </a>
  </div>
</header>

<div class="flex">
  <aside class="w-64 bg-white shadow h-screen p-4 flex flex-col">
    <h2 class="text-lg font-semibold mt-20 mb-4">Lessons</h2>
  
    <!-- Current Lesson Progress -->
    <div id="current-lesson" class="mb-4">
      <h3 class="font-semibold text-xl">Current Lesson</h3>
      <p id="current-lesson-title" class="text-gray-600"></p>
      <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
        <div id="lesson-progress-bar" class="bg-blue-600 h-2 rounded-full" style="width: 0%;"></div>
      </div>
    </div>
  
    <!-- Scrollable Lesson Navigation -->
    <div class="flex-grow overflow-y-auto mt-4">
      <h3 class="text-lg font-semibold mb-2">Lesson Navigation</h3>
      <ul id="lesson-links" class="space-y-2">
        <!-- Lessons will be added dynamically -->
      </ul>
    </div>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 p-6 pt-20 overflow-y-auto">
    <h2 id="lesson-title" class="text-2xl font-bold mb-2">Welcome to HTML</h2>
    <p id="lesson-desc" class="mb-4 text-gray-700">Choose a lesson to begin coding.</p>

    <!-- Progress Bar -->
    <div class="w-full bg-gray-200 rounded-full h-2 mb-6">
      <div id="progress-bar" class="bg-blue-600 h-2 rounded-full" style="width: 0%;"></div>
    </div>

    <!-- Lesson Info Panel -->
    <div id="lesson-info" class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 rounded">
      <h3 id="lesson-header" class="text-xl font-semibold text-yellow-800 mb-2">Lesson Title</h3>
      <p id="lesson-description" class="text-gray-700">Lesson description goes here. This will help learners understand the core idea of the lesson before they code.</p>

      <div id="lesson-challenge" class="mt-4 text-sm text-blue-800">
        <strong>Challenge:</strong> <span id="challenge-text">Try doing something with the code below!</span>
      </div>
    </div>

    <!-- Code Editor -->
    <div class="bg-white p-4 rounded shadow">
      <textarea id="editor" name="editor"></textarea>
      <button onclick="runCode()" class="mt-4 bg-green-600 text-white px-4 py-2 rounded">Run Code</button>
    </div>

    <!-- Output Preview -->
    <h3 class="text-xl mt-6 font-semibold">Output:</h3>
    <iframe id="output" class="w-full h-64 bg-white p-2 border mt-2"></iframe>

    <!-- Quiz Section -->
    <div id="quiz-section" class="hidden mt-8">
      <h3 class="text-xl font-semibold mb-4">Quiz: Test Your Knowledge</h3>
      <div id="quiz-container"></div>
      <button onclick="submitQuiz()" class="mt-4 bg-blue-600 text-white px-6 py-2 rounded">Submit Quiz</button>
    </div>

    <!-- Completion -->
    <div class="mt-10 text-right">
      <button onclick="moveToNextLesson()" class="bg-blue-600 text-white px-6 py-2 rounded">Next Lesson</button>
    </div>
  </main>
</div>

<dialog id="modal" class="p-6 rounded shadow-lg w-1/3 max-w-xs">
  <h3 class="text-xl font-semibold mb-4">COMPLETE!!</h3>
  <p id="modal-message" class="mb-4">Message goes here.</p>
  <div class="flex justify-center space-x-4">
    <button id="yes-button" class="bg-green-600 text-white px-6 py-2 rounded" style="display:none;" onclick="moveToNextLesson()">Yes</button>
    <button id="no-button" class="bg-red-600 text-white px-6 py-2 rounded" style="display:none;" onclick="closeModal()">No</button>
    <button id="ok-retry-button" class="bg-blue-600 text-white px-6 py-2 rounded" style="display:none;" onclick="closeModal()">OK Retry</button>
  </div>
</dialog>


<!-- Success Button -->
<button id="nextBtn" class="fade" disabled style="margin-top: 10px;">
  ✅ Challenge Complete! Proceed
</button>


  <!-- CodeMirror & Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/htmlmixed/htmlmixed.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/javascript/javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/css/css.min.js"></script>

  <script>
    const editor = CodeMirror.fromTextArea(document.getElementById('editor'), {
      mode: 'htmlmixed',
      lineNumbers: true,
      theme: 'default',
    });

    const lessons = {
  level1: {
    title: 'What is HTML?',
    desc: 'Learn HTML structure and basic tags.',
    description: 'HTML is an incredibly powerful and versatile language that lets you create everything from simple web pages to complex web applications, with the amazing ability to structure content on the web.',
    challenge: 'Press the "Run Code" button to see your first web page in action!',
    code: '<!DOCTYPE html>\n<html>\n<head><title>My First Page</title></head>\n<body>\n  <h1>Hello, world!</h1>\n</body>\n</html>',
  
  },
  level2: {
  title: 'Basic Structure of an HTML',
  desc: 'Learn how to build the foundation of every webpage using basic HTML tags.',
    description: `Every HTML document follows a simple structure. 

It starts with <!DOCTYPE html>, which tells the version of HTML we are using. 

This is followed by the <html> tag, which contains all the HTML content. 

Inside the <html> tag, we add the <body> tag, which holds all the visible content of the webpage.`,
  challenge: `You are given the base code of an HTML page. Place the following text inside the <body> tag:

"To infinity and beyond!"
`,  code: `<!DOCTYPE html>
<html>
    <body>
        
    </body>
</html>`,
},

level3: {
  title: 'Tags and Elements',
  desc: 'Understand the difference between HTML tags and elements with a hands-on example.',
  description: `In HTML, tags are keywords enclosed in angle brackets, like <html>. They tell the browser how to display the content. Elements are the components of an HTML document, consisting of a start tag, content, and an end tag.

Here's a simple breakdown:

Tags: Keywords in angle brackets that define how content is displayed.
Elements: Components made up of a start tag, content, and an end tag.

For example:

<p>This is a paragraph.</p>

In this example, <p> is the start tag, "This is a paragraph." is the content, and </p> is the end tag. Together, they form a paragraph element.`,
  challenge: `**Easy**

You are given an HTML code with a paragraph tag (<p>). Change the text inside the paragraph to:

**Hello, HTML!**

Make sure to not delete the start or end tag!`,
  code: `<!DOCTYPE html>
<html>
    <body>
        <p>This is some text</p>
    </body>
</html>`
},


level4: {
  title: 'Nesting and Closing Tags',
  desc: 'Learn how to properly nest HTML elements and ensure all tags are closed correctly.',
  description: `In HTML, nesting means placing one element inside another. For example, you can put a <strong> tag inside a <p> tag to make text bold within a paragraph.

Here's how it looks:

<p>This is <strong>bold</strong> text.</p>

Closing tags are crucial. Every start tag must have a corresponding end tag. The end tag is the same as the start tag but with a forward slash (/) before the tag name. For example, <p> starts a paragraph, and </p> ends it.

Incorrect nesting can lead to rendering issues. Always make sure to close tags in the correct order. The inner tag should be closed before the outer tag.

Correct nesting:

<p>This is <strong>bold</strong> text.</p>

Incorrect nesting:

<p>This is <strong>bold text.</p></strong>`,
  challenge: `**Easy**

You are given an HTML document with a paragraph element. Inside the paragraph, nest a <strong> element around the word "important".`,
  code: `<!DOCTYPE html>
<html>
    <body>
        <p>This is an important message.</p>
    </body>
</html>`
},

level5: {
  title: 'Comments in HTML',
  desc: 'Use comments to leave helpful notes in your code that won’t appear on the page.',
  description: `Comments are notes in the code that don't appear on the web page. They are useful for:

- Explaining complex code  
- Leaving notes for yourself or others  
- Temporarily disabling code  

In HTML, comments are written between \`<!--\` and \`-->\`.

Here's an example:

\`\`\`html
<!-- This is a comment -->
<p>This is a paragraph.</p>
\`\`\``,
  challenge: `**Easy**

Add a comment inside the <body> tag with your name and today’s date.`,
  code: `<!DOCTYPE html>
<html>
    <body>
        <p>This is a paragraph.</p>
    </body>
</html>`
},

level6: {
  title: 'Headings',
  desc: 'Learn how to organize your page with headings from <h1> to <h6>.',
  description: `You're probably not going to use only plain text on your website, right? If you want to add a title or section name, the best way is to use headings. There are six levels of headings, from <h1> (the most important) to <h6> (the least important). 

<h1>This is a main heading</h1>  
<h2>This is a subheading</h2>  
<h3>This is a sub-subheading</h3>

Headings organize your content and make it easier for people and search engines to understand your page. Start with <h1> for the main title and use <h2> to <h6> for other sections.`,
  challenge: `**Easy**

Create an HTML document with a main heading (<h1>) that says "Welcome to My Page" and a subheading (<h2>) that says "Introduction".`,
  code: `<!DOCTYPE html>
<html>
  <body>
    <!-- Write code here -->
  </body>
</html>`
},
level7: {
  title: 'Paragraphs',
  desc: 'Learn how to organize text into blocks using paragraphs.',
  description: `In HTML, paragraphs are used to show blocks of text. You define them with the <p> tag.

When you put text between <p> and </p>, the browser will display it as a separate paragraph with some space above and below.

Here’s how you can add a paragraph in HTML:

<p>This is a paragraph.</p>
<p>This is another paragraph.</p>

For example, if you're creating an article, the title would be a heading, and the actual text would be a paragraph.`,
  challenge: `**Easy**

Create an HTML document with two paragraphs. The first paragraph should say "Welcome to our pizza restaurant!" and the second paragraph should say "Explore our menu today."`,
  code: `<!DOCTYPE html>
<html>
  <body>
    <!-- Write code here -->
  </body>
</html>`
},

level8: {
  title: 'Line Breaks',
  desc: 'Learn how to use the <br> tag to break lines within a paragraph.',
  description: `In HTML, the <br> tag is used to create a line break. This tag is useful when you want to start text on a new line without creating a new paragraph. Unlike the <p> tag, which adds a blank line before and after the text, the <br> tag simply moves the text to the next line.

Here's how you can use the <br> tag in HTML:

<p>This is a line.<br>This is another line.</p>

In this example, "This is a line." and "This is another line." will be displayed on separate lines within the same paragraph. The <br> tag is an empty element, which means it doesn't have a closing tag. You just write <br> where you want the line break to occur.`,
  challenge: `**Easy**

You are given an HTML document with a paragraph. Use a line break to make the text appear like this:

Hello, world!  
This is a new line.`,
  code: `<!DOCTYPE html>
<html>
  <body>
    <p>Hello, world!This is a new line.</p>
  </body>
</html>`
},
level9: {
  title: 'Bold and Italic Text',
  desc: 'Learn how to emphasize text using bold and italic styles.',
  description: `In HTML, you can style and emphasize text using the <strong> and <em> tags.

- Use <strong> to make text **bold**.
- Use <em> to make text *italic*.

These tags are helpful when you want to highlight important words.

Here’s how they work:

<p>This is normal text</p>
<p>This is <strong>bold</strong> text</p>
<p>This is <em>italic</em> text</p>

In the example above, the word “bold” appears in bold, and “italic” is displayed in italics.`,
  challenge: `**Easy**

There’s a famous quote by Albert Einstein—and we can’t disagree with it! But we can style it.

Wrap **"difficulty"** in <strong> to make it bold.  
Wrap **"opportunity"** in <em> to make it italic.`,
  code: `<!DOCTYPE html>
<html>
  <body>
    <p>In the middle of every difficulty lies opportunity.</p>
  </body>
</html>`
},
level10: {
  title: 'Bold and Italic Again',
  desc: 'Learn how to use the <b> and <i> tags for bold and italic text.',
  description: `There is another way to style text in HTML:

- Use <b> to make text **bold**.
- Use <i> to make text *italic*.

These tags are similar to <strong> and <em>, but they are more about presentation and less about emphasis.

Example:

<p>This is normal text. <b>This is bold text</b>. <i>This is italic text</i>.</p>

Use these tags when you want to change how text looks without necessarily changing its meaning.`,
  challenge: `**Easy**

You are given an HTML document with a paragraph.  
Style the paragraph using both **bold** and **italic** text using the <b> and <i> tags.`,
  code: `<!DOCTYPE html>
<html>
  <body>
        <p>HTML is fun to learn!</p>
  </body>
</html>`
},
level11: {
  title: 'Recap - Formatting',
  desc: 'Review all the basic text formatting tags in HTML.',
  description: `Now that we have learned the basics of text formatting in HTML, let's recap what we've covered:

- **Headings**: Use <h1> to <h6> tags to create headings of different levels. <h1> is the most important, and <h6> is the least.
- **Paragraphs**: Use <p> tags to create paragraphs. Browsers automatically add space above and below each paragraph.
- **Line Breaks**: Use the <br> tag to create a line break within a paragraph without starting a new one.
- **Bold and Italic Text**: Use <strong> or <b> to make text bold and <em> or <i> to make text italic.

Here's an example that combines these elements:

<h1>Main Heading</h1>
<p>This is a <strong>bold</strong> paragraph. Here is a line break:<br>This is <em>italic</em> text.</p>

This example shows a heading, bold and italic text, and a line break inside a paragraph. It’s a great way to combine formatting elements to create clear and styled content.`,
  challenge: `**Easy**

Create an HTML document that includes all the formatting elements we've learned so far:

- A main heading (<h1>) with the text "Formatting Recap"
- A paragraph (<p>) that says: "This is a paragraph with bold and italic text."  
  Make "bold" bold using <b> or <strong> and "italic" italic using <i> or <em>.
- Another paragraph that says: "Here is a line break:" followed by a line break (<br>) and the text "This is a new line."`,
  code: `<!DOCTYPE html>
<html>
  <body>
            <!-- Write code here -->

  </body>
</html>`
},
level12: {
  title: 'Unordered List',
  desc: 'Learn how to create bullet point lists using the <ul> and <li> tags.',
  description: `In HTML, an unordered list is a list of items that are not ordered by numbers or letters. Instead, each item is marked with a bullet point.

To create an unordered list, you use the <ul> tag. Each item in the list is defined using the <li> tag.

Example:

<ul>
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
</ul>

In this example:
- The <ul> tag starts the unordered list.
- Each <li> tag represents a list item.
- The browser will display the list with bullet points.

Unordered lists are great for things like ingredients, features, or tasks—anything that doesn’t require a specific order.`,
  challenge: `**Easy**

Create an HTML document with an unordered list that contains three items:  
"Apple", "Banana", and "Orange". (In that order)`,
  code: `<!DOCTYPE html>
<html>
  <body>
            <!-- Write code here -->

  </body>
</html>`
},
level13: {
  title: 'Ordered List',
  desc: 'Learn how to create numbered lists using the <ol> and <li> tags.',
  description: `In HTML, an ordered list is a list of items that are ordered by numbers or letters.

To create an ordered list, use the <ol> tag. Each item inside the list is defined using the <li> tag.

Example:

<ol>
  <li>First item</li>
  <li>Second item</li>
  <li>Third item</li>
</ol>

In this example:
- The <ol> tag starts the ordered list.
- Each <li> tag represents a list item.
- The browser will display the items as a numbered list.

Ordered lists are useful for showing steps in a process, instructions, or anything where the order is important.`,
  challenge: `**Easy**

Create an HTML document with an ordered list that contains three items:  
"First", "Second", and "Third". (In that order)`,
  code: `<!DOCTYPE html>
<html>
  <body>
                <!-- Write code here -->

  </body>
</html>`
},
level14: {
  title: 'Nested Lists',
  desc: 'Learn how to create lists within lists using nested <ul> and <ol> tags.',
  description: `In HTML, a nested list is a list inside another list. This is useful for showing hierarchy or sub-categories.

You can nest an unordered list (<ul>) or an ordered list (<ol>) inside a list item (<li>) of another list.

Example:

<ul>
  <li>Item 1</li>
  <li>Item 2
    <ul>
      <li>Subitem 2.1</li>
      <li>Subitem 2.2</li>
    </ul>
  </li>
  <li>Item 3</li>
</ul>

In this example, "Item 2" has a nested list with two subitems.

You can mix ordered and unordered lists as needed.`,
  challenge: `**Easy**

Create an HTML document with a nested unordered list that looks like this:

Fruits  
- Apple  
- Banana  
- Orange  

Vegetables  
- Carrot  
- Broccoli  
- Spinach  

Grains`,
  code: `<!DOCTYPE html>
<html>
  <body>
            <!-- Write code here -->

  </body>
</html>`
},
level15: {
  title: 'Recap - Lists',
  desc: 'Review what you’ve learned about HTML lists, including unordered, ordered, and nested lists.',
  description: `Let's recap what we've learned about lists in HTML:

- **Unordered Lists**: Use \`<ul>\` to create a list with bullet points. Each item is defined using \`<li>\`.
- **Ordered Lists**: Use \`<ol>\` to create a numbered list. Each item is defined using \`<li>\`.
- **Nested Lists**: You can place one list inside another by putting a \`<ul>\` or \`<ol>\` element inside an \`<li>\` element of another list.

These different types of lists help organize content effectively and make it easier to read, whether you're listing steps, categories, or grouped items.

Example:

<ul>
  <li>Electronics
    <ol>
      <li>Phone</li>
      <li>Tablet</li>
      <li>Laptop</li>
    </ol>
  </li>
  <li>Books
    <ul>
      <li>Fiction</li>
      <li>Non-Fiction</li>
      <li>Reference</li>
    </ul>
  </li>
</ul>

This example uses all three types of lists to organize information in a structured way.`,
  challenge: `**Easy**

Create an HTML document that includes all the list types we've learned so far:

- An unordered list (\`<ul>\`) with the items "Electronics" and "Books".
- Inside the "Electronics" item, create a nested ordered list (\`<ol>\`) with the items "Phone", "Tablet", and "Laptop".
- Inside the "Books" item, create a nested unordered list (\`<ul>\`) with the items "Fiction", "Non-Fiction", and "Reference".`,
  code: `<!DOCTYPE html>
<html>
  <body>
    <!-- Write code here -->

  </body>
</html>`
},
level16: {
  title: 'Project Overview - Recipe Card',
  desc: 'Create a recipe card using HTML to demonstrate your understanding of text formatting and lists.',
  description: `In this project, you will create a recipe card using HTML, demonstrating your understanding of text formatting and lists. The card will feature:

- A **title** for the recipe.
- A brief **description** of the recipe.
- An unordered list (\`<ul>\`) for the ingredients.
- An ordered list (\`<ol>\`) for the steps.

You are encouraged to personalize the recipe with your own ideas or use the example provided. This project is designed to help you solidify your foundational HTML skills while fostering creativity.`,

  challenge: `**Easy**

Create an empty HTML document from scratch, including the \`<html>\` and \`<body>\` tags. This is the starting point for your recipe card. Fill in your content as you go.`,

  code: `<!DOCTYPE html>`
},
level17: {
  title: 'Recipe Title and Description',
  desc: 'Learn how to structure a recipe title and description in HTML using \`<h1>\` for the title and \`<p>\` for the description.',
  description: `For this challenge, you will add the recipe title as a heading and a brief description of the recipe. 

Use the \`<h1>\` tag for the title and the \`<p>\` tag for the description. The title should describe the recipe, and the description should give a brief overview of what the recipe is about.

For example:
- **Title**: Chocolate Chip Cookies
- **Description**: This is a simple recipe for making delicious chocolate chip cookies at home.`,

  challenge: `**Easy**

Create an HTML document with:
- A recipe title in \`<h1>\` (e.g., "Chocolate Chip Cookies").
- A description of the recipe in \`<p>\`. Write a brief description of your recipe.`,

  code: `<!DOCTYPE html>
<html>
  <body>
    
  </body>
</html>`
},
level18: {
  title: 'Ingredients',
  desc: 'Learn how to add a heading for the ingredients section and create an unordered list in HTML.',
  description: `In this challenge, you will:
  
- Add a heading using the \`<h2>\` tag to title the ingredients section.
- Use an unordered list (\`<ul>\`) to list the ingredients, with each item being defined by a \`<li>\` tag.

For example:
- **Heading**: Ingredients
- **List of ingredients**:
  - 1 cup of butter
  - 1 cup of sugar
  - 2 cups of flour
  - 1 cup of chocolate chips`,

  challenge: `**Easy**

Create an HTML document that includes:
- A heading (\`<h2>\`) with the text "Ingredients".
- An unordered list (\`<ul>\`) with the following items:
  - 1 cup of butter
  - 1 cup of sugar
  - 2 cups of flour
  - 1 cup of chocolate chips`,

  code: `<!DOCTYPE html>`
},
level19: {
  title: 'Steps',
  desc: 'Learn how to add a heading for the steps section and create an ordered list in HTML.',
  description: `In this challenge, you will:

- Add a heading using the \`<h2>\` tag to title the steps section.
- Use an ordered list (\`<ol>\`) to list the steps, with each item being defined by a \`<li>\` tag.

For example:
- **Heading**: Steps
- **List of steps**:
  1. Preheat the oven to 350°F (175°C).
  2. Mix the butter and sugar together in a bowl.
  3. Add the flour and chocolate chips, and mix well.
  4. Scoop the dough onto a baking sheet.
  5. Bake for 10-12 minutes or until golden brown.`,

  challenge: `**Easy**

Create an HTML document that includes:
- A heading (\`<h2>\`) with the text "Steps".
- An ordered list (\`<ol>\`) with the following steps:
  1. Preheat the oven to 350°F (175°C).
  2. Mix the butter and sugar together in a bowl.
  3. Add the flour and chocolate chips, and mix well.
  4. Scoop the dough onto a baking sheet.
  5. Bake for 10-12 minutes or until golden brown.`,

  code: `<!DOCTYPE html>`
}






};
const expectedOutputs = [
  // level1
  `<!DOCTYPE html>
<html>
<head><title>My First Page</title></head>
<body>
  <h1>Hello, world!</h1>
</body>
</html>`,

  // level2
  `<!DOCTYPE html>
<html>
    <body>
        To infinity and beyond!
    </body>
</html>`,

  // level3
  `<!DOCTYPE html>
<html>
    <body>
        <p>Hello, HTML!</p>
    </body>
</html>`,

  // level4
  `<!DOCTYPE html>
<html>
    <body>
        <p>This is an <strong>important</strong> message.</p>
    </body>
</html>`,

  // level5
  `<!DOCTYPE html>
<html>
    <body>
        <!-- Your Name - Today's Date -->
        <p>This is a paragraph.</p>
    </body>
</html>`,

  // level6
  `<!DOCTYPE html>
<html>
  <body>
    <h1>Welcome to My Page</h1>
    <h2>Introduction</h2>
  </body>
</html>`,

  // level7
  `<!DOCTYPE html>
<html>
  <body>
    <p>Welcome to our pizza restaurant!</p>
    <p>Explore our menu today.</p>
  </body>
</html>`,

  // level8
  `<!DOCTYPE html>
<html>
  <body>
    <p>Hello, world!<br>This is a new line.</p>
  </body>
</html>`,
  // level9
  `<!DOCTYPE html>
<html>
  <body>
    <p>This is a <strong>bold</strong> word and this is an <em>italic</em> word.</p>
  </body>
</html>`,

  // level10
  `<!DOCTYPE html>
<html>
  <body>
    <p>This is <b>bold</b> text and this is <i>italic</i> text.</p>
  </body>
</html>`,

  // level11
  `<!DOCTYPE html>
<html>
  <body>
    <h1>Formatting Recap</h1>
    <p>This is a paragraph with <strong>bold</strong> and <em>italic</em> text.</p>
    <p>Here is a line break:<br>This is a new line.</p>
  </body>
</html>`,

  // level12
  `<!DOCTYPE html>
<html>
  <body>
    <ul>
      <li>Apple</li>
      <li>Banana</li>
      <li>Orange</li>
    </ul>
  </body>
</html>`,

  // level13
  `<!DOCTYPE html>
<html>
  <body>
    <ol>
      <li>First</li>
      <li>Second</li>
      <li>Third</li>
    </ol>
  </body>
</html>`,

  // level14
  `<!DOCTYPE html>
<html>
    <body>
        <ul>
            <li>Fruits
                <ol>
                    <li>Apple</li>
                    <li>Banana</li>
                    <li>Orange</li>
                </ol>
            </li>
            <li>Vegetables
                <ul>
                    <li>Carrot</li>
                    <li>Broccoli</li>
                    <li>Spinach</li>
                </ul>
            </li>
            <li>Grains</li>
        </ul>
    </body>
</html>`,
// level15
`<!DOCTYPE html>
<html>
  <body>
    <ul>
      <li>Electronics
        <ol>
          <li>Phone</li>
          <li>Tablet</li>
          <li>Laptop</li>
        </ol>
      </li>
      <li>Books
        <ul>
          <li>Fiction</li>
          <li>Non-Fiction</li>
          <li>Reference</li>
        </ul>
      </li>
    </ul>
  </body>
</html>`,
// level16
`<!DOCTYPE html>
<html>
  <body>
    <h1>Spaghetti Bolognese</h1>
    <p>This classic Spaghetti Bolognese recipe is rich in flavor and perfect for a family dinner. The hearty sauce is made with ground beef, tomatoes, and a mix of herbs and spices.</p>

    <h2>Ingredients</h2>
    <ul>
      <li>200g Spaghetti</li>
      <li>300g Ground beef</li>
      <li>1 Onion, chopped</li>
      <li>2 Garlic cloves, minced</li>
      <li>1 Can of crushed tomatoes</li>
      <li>2 tbsp Tomato paste</li>
      <li>1 tsp Dried oregano</li>
      <li>1 tsp Dried basil</li>
      <li>Salt and pepper to taste</li>
      <li>Olive oil for cooking</li>
    </ul>

    <h2>Steps</h2>
    <ol>
      <li>Heat olive oil in a pan and sauté the chopped onion and garlic until softened.</li>
      <li>Add the ground beef and cook until browned.</li>
      <li>Stir in the tomato paste and cook for 2 minutes.</li>
      <li>Add the crushed tomatoes, oregano, and basil. Season with salt and pepper. Let the sauce simmer for 20 minutes.</li>
      <li>Meanwhile, cook the spaghetti according to package instructions. Drain and set aside.</li>
      <li>Serve the spaghetti topped with the Bolognese sauce. Enjoy!</li>
    </ol>
  </body>
</html>`,
// level17
`<!DOCTYPE html>
<html>
  <body>
    <h1>Chocolate Chip Cookies</h1>
    <p>This is a simple recipe for making delicious chocolate chip cookies at home.</p>
  </body>
</html>`,
// level18
`<!DOCTYPE html>
<html>
    <body>
        <h1>Chocolate Chip Cookies</h1>
        <p>This is a simple recipe for making delicious chocolate chip cookies at home.</p>
        
        <h2>Ingredients:</h2>
        <ul>
            <li>1 cup of butter</li>
            <li>1 cup of sugar</li>
            <li>2 cups of flour</li>
            <li>1 cup of chocolate chips</li>
        </ul>
    </body>
</html>`,
// level19
`<!DOCTYPE html>
<html>
    <body>
        <h1>Chocolate Chip Cookies</h1>
        <p>This is a simple recipe for making delicious chocolate chip cookies at home.</p>
        
        <h2>Ingredients:</h2>
        <ul>
            <li>1 cup of butter</li>
            <li>1 cup of sugar</li>
            <li>2 cups of flour</li>
            <li>1 cup of chocolate chips</li>
        </ul>
        
        <h2>Steps:</h2>
        <ol>
            <li>Preheat the oven to 350°F (175°C).</li>
            <li>Mix the butter and sugar together in a bowl.</li>
            <li>Add the flour and chocolate chips, and mix well.</li>
            <li>Scoop the dough onto a baking sheet.</li>
            <li>Bake for 10-12 minutes or until golden brown.</li>
        </ol>
    </body>
</html>`








];

function loadLesson(level) {
  localStorage.setItem('currentLesson', level);
  const lesson = lessons[level];

  // Update Lesson Title & Description
  document.getElementById('lesson-title').textContent = lesson.title;
  document.getElementById('lesson-header').textContent = lesson.title;
  document.getElementById('lesson-description').textContent = lesson.description;
  document.getElementById('challenge-text').textContent = lesson.challenge;

  // Set editor content
  editor.setValue(lesson.code);
  document.getElementById('quiz-section').classList.add('hidden'); // Hide quiz initially
  loadProgress(level);
  document.getElementById('output').srcdoc = ''; // Clear previous output
  updateSidebar(); // Update sidebar when a new lesson is loaded
}

function loadProgress(level) {
  const progress = JSON.parse(localStorage.getItem('progress')) || {};
  const lessonProgress = progress[level] || 0;
  document.getElementById('lesson-progress-bar').style.width = lessonProgress + '%';
}

let currentLesson = 0;

function runCode(levelIndex = currentLesson) {
  const userCode = editor.getValue();
  const outputFrame = document.getElementById('output');
  const expected = expectedOutputs[levelIndex];

  // Display user's code in iframe
  outputFrame.srcdoc = userCode;

  // Normalize for comparison
  const normalizedExpected = expected.replace(/\s+/g, ' ').trim().toLowerCase();
  const normalizedUserCode = userCode.replace(/\s+/g, ' ').trim().toLowerCase();

  if (normalizedUserCode.includes(normalizedExpected)) {
    showModal('✅ Great job! You got it right.', true);
  } else {
    showModal('❌ Hmm... Something’s not right. Please review your code and try again.');
  }
}


function showModal(message, isCorrect = false) {
  const modal = document.getElementById('modal');
  const modalMessage = document.getElementById('modal-message');
  const yesButton = document.getElementById('yes-button');
  const noButton = document.getElementById('no-button');
  const okRetryButton = document.getElementById('ok-retry-button');

  if (modal && modalMessage) {
    modalMessage.textContent = message;
    modal.showModal(); // Opens the dialog

    // If the message indicates an incorrect answer, show "OK Retry"
    if (isCorrect) {
      if (yesButton && noButton) {
        yesButton.style.display = 'inline-block'; // Show "Yes"
        noButton.style.display = 'inline-block'; // Show "No"
      }
      if (okRetryButton) {
        okRetryButton.style.display = 'none'; // Hide "OK Retry"
      }
    } else {
      if (okRetryButton) {
        okRetryButton.style.display = 'inline-block'; // Show "OK Retry"
      }
      if (yesButton && noButton) {
        yesButton.style.display = 'none'; // Hide "Yes"
        noButton.style.display = 'none'; // Hide "No"
      }
    }
  } else {
    console.error('Modal or Modal Message element not found');
  }
}


function closeModal() {
  const modal = document.getElementById('modal');
  if (modal) {
    modal.close(); // Closes the dialog
  } else {
    console.error('Modal element not found');
  }
}

function completeLesson() {
  const current = localStorage.getItem('currentLesson') || 'level1';
  let progress = JSON.parse(localStorage.getItem('progress')) || {};
  progress[current] = 100;
  localStorage.setItem('progress', JSON.stringify(progress));
  loadProgress(current);
  document.getElementById('quiz-section').classList.remove('hidden'); // Show quiz section
  
  // Close modal after completing the lesson
  closeModal();

  // Show modal after completing the lesson
  setTimeout(() => {
    showModal('Lesson completed! Would you like to move to the next lesson?', true);
  }, 300); // Delay the next modal to give time for the previous one to close
}

function moveToNextLesson() {
  const current = localStorage.getItem('currentLesson') || 'level1';
  const nextLesson = getNextLesson(current);
  loadLesson(nextLesson);

  // Close modal after selecting "Yes" to move to next lesson
  closeModal();

  updateSidebar(); // Update sidebar after lesson change
}

function getNextLesson(currentLesson) {
  const lessonKeys = Object.keys(lessons);
  const currentIndex = lessonKeys.indexOf(currentLesson);
  const nextIndex = currentIndex + 1;

  if (nextIndex < lessonKeys.length) {
    return lessonKeys[nextIndex];
  } else {
    alert('You have completed all lessons!');
    return currentLesson; // Keep on the last lesson
  }
}

// Load default or last lesson on page load
window.onload = () => {
  const defaultLesson = localStorage.getItem('currentLesson') || 'level1';
  loadLesson(defaultLesson);
  // Don't show the modal immediately
  // Make sure the modal shows only when needed
};

// Function to update the sidebar content
function updateSidebar() {
  const currentLesson = localStorage.getItem('currentLesson') || 'level1';
  const lesson = lessons[currentLesson];

  // Update the current lesson section
  document.getElementById('current-lesson-title').textContent = lesson.title;

  // Update the progress bar
  loadProgress(currentLesson);

  // Update the lesson links in the sidebar
  const lessonLinksContainer = document.getElementById('lesson-links');
  lessonLinksContainer.innerHTML = ''; // Clear existing links

  Object.keys(lessons).forEach((key) => {
    const lessonItem = document.createElement('li');
    lessonItem.classList.add('mb-2');

    const lessonLink = document.createElement('a');
    lessonLink.href = '#';
    lessonLink.textContent = lessons[key].title;
    lessonLink.classList.add('text-blue-600', 'hover:underline', 'block');
    
    if (key === currentLesson) {
      lessonLink.classList.add('font-semibold');
    }

    lessonLink.addEventListener('click', () => {
      loadLesson(key); // Load the selected lesson
    });

    lessonItem.appendChild(lessonLink);
    lessonLinksContainer.appendChild(lessonItem);
  });
}

// Call this function when the page loads or when the lesson is changed
updateSidebar();
  </script>
</body>
</html>
